{"ast":null,"code":"import React,{useRef,useState}from\"react\";import{useFrame}from\"@react-three/fiber\";import{Vector3}from\"three\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Box(_ref){let{color}=_ref;const box=useRef();const time=useRef(0);const[position,setPosition]=useState(getInitialPosition());const[xRotSpeed]=useState(()=>Math.random());const[yRotSpeed]=useState(()=>Math.random());const[scale]=useState(()=>Math.pow(Math.random(),2.0)*0.5+0.05);function getInitialPosition(){let v=new Vector3((Math.random()*2-1)*3,Math.random()*2.5+0.1,(Math.random()*2-1)*15);if(v.x<0)v.x-=1.75;if(v.x>0)v.x+=1.75;return v;}function resetPosition(){let v=new Vector3((Math.random()*2-1)*3,Math.random()*2.5+0.1,Math.random()*10+10);if(v.x<0)v.x-=1.75;if(v.x>0)v.x+=1.75;setPosition(v);}useFrame((state,delta)=>{time.current+=delta*1.2;let newZ=position.z-time.current;if(newZ<-10){resetPosition();time.current=0;}box.current.position.set(position.x,position.y,newZ);box.current.rotation.x+=delta*xRotSpeed;box.current.rotation.y+=delta*yRotSpeed;},[xRotSpeed,yRotSpeed,position]);return/*#__PURE__*/_jsxs(\"mesh\",{ref:box,\"rotation-x\":Math.PI*0.5,scale:scale,castShadow:true,children:[/*#__PURE__*/_jsx(\"boxGeometry\",{args:[1,1,1]}),/*#__PURE__*/_jsx(\"meshStandardMaterial\",{color:color,envMapIntensity:0.15})]});}export function Boxes(){const[arr]=useState(()=>{let a=[];for(let i=0;i<100;i++)a.push(0);return a;});return/*#__PURE__*/_jsx(_Fragment,{children:arr.map((e,i)=>/*#__PURE__*/_jsx(Box,{color:i%2===0?[0.4,0.1,0.1]:[0.05,0.15,0.4]},i))});}","map":{"version":3,"names":["React","useRef","useState","useFrame","Vector3","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Box","_ref","color","box","time","position","setPosition","getInitialPosition","xRotSpeed","Math","random","yRotSpeed","scale","pow","v","x","resetPosition","state","delta","current","newZ","z","set","y","rotation","ref","PI","castShadow","children","args","envMapIntensity","Boxes","arr","a","i","push","map","e"],"sources":["C:/Users/Catriel/Desktop/3d-react/src/Boxes.js"],"sourcesContent":["import React, { useRef, useState } from \"react\";\r\nimport { useFrame } from \"@react-three/fiber\";\r\nimport { Vector3 } from \"three\";\r\n\r\nfunction Box({ color }) {\r\n  const box = useRef();\r\n  const time = useRef(0);\r\n  const [position, setPosition] = useState(getInitialPosition());\r\n  const [xRotSpeed] = useState(() => Math.random());\r\n  const [yRotSpeed] = useState(() => Math.random());\r\n  const [scale] = useState(() => Math.pow(Math.random(), 2.0) * 0.5 + 0.05);\r\n\r\n  function getInitialPosition() {\r\n    let v = new Vector3((Math.random() * 2 - 1) * 3, Math.random() * 2.5 + 0.1, (Math.random() * 2 - 1) * 15); \r\n    if(v.x < 0) v.x -= 1.75;\r\n    if(v.x > 0) v.x += 1.75;\r\n\r\n    return v;\r\n  }\r\n\r\n  function resetPosition() {\r\n    let v = new Vector3((Math.random() * 2 - 1) * 3, Math.random() * 2.5 + 0.1, Math.random() * 10 + 10); \r\n    if(v.x < 0) v.x -= 1.75;\r\n    if(v.x > 0) v.x += 1.75;\r\n\r\n    setPosition(v);\r\n  }\r\n\r\n  useFrame(\r\n    (state, delta) => {\r\n      time.current += delta * 1.2;\r\n      let newZ = position.z - (time.current);\r\n\r\n      if(newZ < -10) {\r\n        resetPosition();\r\n        time.current = 0;\r\n      }\r\n\r\n      box.current.position.set(\r\n        position.x, \r\n        position.y, \r\n        newZ, \r\n      )\r\n      box.current.rotation.x += delta * xRotSpeed;\r\n      box.current.rotation.y += delta * yRotSpeed;\r\n    },\r\n    [xRotSpeed, yRotSpeed, position]\r\n  );\r\n\r\n  return (\r\n    <mesh\r\n      ref={box}\r\n      rotation-x={Math.PI * 0.5}\r\n      scale={scale}\r\n      castShadow\r\n    >\r\n      <boxGeometry args={[1, 1, 1]} />\r\n      <meshStandardMaterial color={color} envMapIntensity={0.15} />\r\n    </mesh>\r\n  );\r\n}\r\n\r\nexport function Boxes() {\r\n  const [arr] = useState(() => {\r\n    let a = [];\r\n    for(let i = 0; i < 100; i++) a.push(0);\r\n    return a;\r\n  });\r\n\r\n  return <>\r\n    {arr.map((e, i) => <Box key={i} color={i % 2 === 0 ? [0.4, 0.1, 0.1] : [0.05, 0.15, 0.4] }/>)}\r\n  </>\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}